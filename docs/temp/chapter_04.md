# 第四章 船联网通信基础

## 4.1 通信基础知识

### 4.1.1 船舶通信技术概览

在人类还没有发明舟船之前，如果没有桥梁将两座岛屿连接起来，岛上的人们就无法互相访问，分享资源或信息。通信技术就像是连接人们的桥梁，它使得信息可以在不同的设备、系统或人之间流动。无论是通过书信、电话、电视还是互联网，通信技术都在背后扮演着关键角色，确保信息的传递能够顺利进行。通信技术涵盖了从基本的语言和文字到现代的电子设备和网络协议的广泛范围。它不仅包括物理介质，如电缆和无线电波，用于数据的实际传输；还包括一系列标准、协议和技术，这些规则和技术确保了信息可以被准确地编码、发送、接收和解码。

船舶航行在浩瀚海洋上，依靠现代通信技术与外界保持联系，确保安全和效率，船舶通信技术包括用于船舶定位、航行管理、紧急响应和日常运营等场景。船舶通信技术从基本的定位和导航到复杂的数据和语音通讯，构建了一个多层次、全方位的通信网络，从传统的旗语和灯光信号到现代的卫星通讯系统，船舶通信技术的发展既反映了海上通信需求的多样性，也体现了技术进步对航海安全和效率的推动作用。

卫星通信在船舶通信技术中占据重要地位，比如海事卫星通讯系统（Inmarsat），它为船舶提供了语音、传真和数据传输服务，使船舶能够进行天气查询、导航警告接收以及进行日常的商务和个人通讯。无论是语音通话、电子邮件还是数据传输，卫星通信都确保了信息的及时交换。此外，卫星通信还支持紧急定位信标（EPIRB），在遇险时能够迅速向搜索和救援中心发出求救信号。全球定位系统（GPS）为船舶提供精确的地理位置信息，是现代航海不可或缺的导航工具。紧随其后的是自动识别系统（AIS），通过VHF无线电波自动交换船舶的位置、身份和其他航行信息，极大提升了船舶之间以及船舶与岸基设施之间的透明度和安全性。

### 4.1.2 通信协议基础

在数字世界中，设备之间的顺畅对话是基于一套共同遵守的规则或标准进行的，这套规则被称作通信协议。它们定义了数据如何在网络中传输，确保信息从源点到达目的地时的完整性、安全性和可靠性。通信协议覆盖了数据封装、传输、编码、处理和解码等一系列过程，它们可以应用于不同的层级，从物理硬件的电气信号传输到更高层次的数据格式和结构。

这些协议使得来自不同制造商、运行不同操作系统的设备能够互相通信，无论它们使用的是有线连接还是无线技术。例如，互联网的基础建立在诸如传输控制协议（TCP）和互联网协议（IP）之上，它们共同构成了TCP/IP协议，管理着网上数据的发送和接收。

每一个通信协议都包含了特定的规则和约定，比如数据传输的速率、信号的格式、数据包的结构、错误处理机制以及如何应对数据丢失情况等。这样，无论在局域网内部还是全球互联网之间，信息的传递都能够高效且无误地进行。下面就让我们一起来看看TCP/IP协议和FTP协议具体是如何工作的。

设想互联网是一座由无数道路和高速公路组成的巨大网络城市，而信息包（数据包）就是在这个网络城市中穿梭的汽车。为了确保这些“汽车”能够从出发点顺利到达目的地，同时保证信息的完整性和可靠性，就需要有一套复杂的交通规则和路线规划系统。这正是传输控制协议（TCP）和互联网协议（IP）共同完成的任务。

**互联网协议（IP）**负责为每台连接到网络的设备分配一个独一无二的地址，就像给每栋房子分配一个具体的地址一样。这个地址确保了数据包能被送往正确的目的地。IP还规定了数据包如何封装和路由通过网络的基本规则，但它本身不保证数据包的顺利送达——这就好比IP负责规划路线，但不保证旅途的顺畅。

这时，**传输控制协议（TCP）**就派上了用场。TCP在IP的基础上添加了一系列的机制来确保数据传输的可靠性。它像是一位负责任的物流经理，确保每一份货物（数据包）都能按时安全地到达，并且在遇到交通堵塞（丢包）时能够请求重新发送。TCP通过三次握手过程建立一个稳定的连接，就像是发件人和收件人之间确认收货地址和发送细节。它还实现了拥塞控制，动态调整数据传输的速度，以防网络过载。

TCP还有一项重要功能是保证数据包的正确顺序。如果数据包像是乱序抵达的拼图片段，TCP负责把这些片段按照正确的顺序重新排列，确保最终接收到的信息是完整无缺的。此外，TCP通过端到端的校验，确认数据在传输过程中没有被损坏或篡改，保障通信的安全性。

在现代计算机体系中，文件是数据的载体。当我们需要传输文件，特别是大文件时，有一种名为文件传输协议（FTP）的工具，它就像是专门为这项任务设计的快递服务。FTP让我们能够在计算机网络中，从一个主机传输文件到另一个主机，就像把书从一个城市邮寄到另一个城市。

FTP工作在客户端-服务器模型上，其中一个计算机充当客户端，发起文件传输请求，另一台计算机则作为服务器，接受这些请求并提供文件。为了开始文件的传输过程，客户端首先需要通过网络连接到服务器，并进行身份验证，这通常需要提供用户名和密码。一旦连接和身份验证成功，文件传输就可以开始了。

FTP使用TCP/IP协议来保证文件传输的可靠性。它在传输过程中使用了两个独立的通道：一个是命令通道（通常运行在21号端口），用于传输控制命令和响应；另一个是数据通道，用于实际的文件传输。这种分离确保了命令交流不会与文件数据传输混淆，提高了传输效率和安全性。

FTP支持两种模式：主动模式和被动模式。在主动模式下，服务器会尝试连接到客户端指定的端口来传输数据。而在被动模式下，客户端连接到服务器指定的端口进行数据传输，这对于客户端位于防火墙或NAT（网络地址转换）后的情况更加友好。

尽管FTP是一个强大的文件传输工具，它也有一些局限性，特别是在安全性方面。传统的FTP不加密数据，这意味着传输过程中的文件和凭证（用户名和密码）可能会被拦截。为了解决这个问题，出现了安全的文件传输协议，如FTPS（在FTP上加入SSL/TLS加密）和SFTP（SSH文件传输协议），它们提供了加密的数据通道，保障数据传输的安全性。

随着通信技术的迅猛发展，新的通信协议不断被开发出来，以支持更快的数据传输速度、更高的安全性要求和更复杂的网络架构。无论是家庭里的智能设备之间的简单消息交换，还是全球范围内复杂的云计算服务，通信协议都是确保信息准确传输的基石，使数字化通信成为可能。

### 4.1.3 典型物联网通信协议

与人类之间通过特定语言规范的交流形式不同，设备与设备之间的沟通是通过特定的协议进行的，这些协议考虑到了物联网特有的需求，如低功耗、长距离通信和稳定性，在物理连接、网络传输以及应用层面提供了全方位的支持。以下是对上述几种主要物联网通信协议技术细节的深入探讨。

一种广泛使用的协议是消息队列遥测传输（MQTT），MQTT是一个基于发布/订阅模型的轻量级消息传输协议，设计初衷是为了适应低带宽和不稳定的网络环境。它在TCP/IP协议上运行，确保了消息的可靠传输。MQTT协议定义了三种消息服务质量（QoS）级别，满足不同的传输可靠性需求：QoS 0（最多一次）、QoS 1（至少一次）和QoS 2（仅一次）。这使得MQTT非常适用于需要高效、节能通信的移动设备和传感器网络。另外，MQTT支持"遗嘱"消息，允许设备在意外断开连接时发送最后一条消息，进一步增强了通信的健壮性。

受限应用协议（CoAP）是为小型设备设计的一种Web传输协议，它运行在UDP上，比TCP更轻量级，减少了开销。CoAP支持GET、POST、PUT和DELETE这些HTTP方法，使其能够无缝集成进现有的Web应用。CoAP的独特之处在于其支持资源发现和组播功能，设备可以轻松发现网络中的其他设备和服务，实现高效的组网和数据交换。此外，CoAP还采用了DTLS（数据报传输层安全）协议，保证了数据传输的安全性。

低功耗蓝牙（BLE）是专为短距离通信设计的通信标准，与传统蓝牙技术相比，它在保持通信能力的同时，大幅降低了功耗。BLE采用灵活的广播模式和连接模式，支持点对点、广播和网状网络拓扑。其“广告”机制允许设备定期广播信息，而无需建立持久连接，这降低了设备的能耗，延长了电池寿命。BLE特别适合于周期性传输少量数据的应用场景，如健康监测设备和智能家居控制。

ZigBee和Z-Wave都是为家庭自动化和智能家居设计的无线通信技术，它们通过低功耗的无线信号实现设备间的通信。ZigBee基于IEEE 802.15.4标准，支持复杂的网状网络拓扑，能够连接成千上万的小型设备。ZigBee的优势在于其高安全性、大范围覆盖和高数据吞吐量。而Z-Wave则运行在专用频段上，避免了与Wi-Fi和蓝牙等设备的干扰，提供了稳定的网络连接。Z-Wave的网络容量较小，但它通过简化的协议和低功耗设计，确保了长期稳定的设备运行。

随着我国5G技术的逐渐成熟，物联网通信领域迎来将新的发展机遇。5G技术可以提供超高速的数据传输率（高达数十Gbps），极低的延迟（低至毫秒级）和海量的设备连接能力。这使得5G成为支持智能城市、自动驾驶汽车、远程医疗和工业自动化等高端应用的理想选择。5G网络采用了网络切片技术，能够为不同的服务和应用提供定制化的网络环境，满足各种场景下对速度、延迟和连接密度的具体需求。

### 4.1.4 船联网的网络架构设计原则

## 4.2 船内联网通信技术

### 4.2.1 传感器网络

构成现代信息技术框架的关键元素之一是能够在各种环境中收集数据的设备——这就是我们所称的传感器网络。这些网络通过一系列分布式传感器实现，这些传感器具备监测、收集并传输关于环境或其他被监控对象的物理参数（如温度、湿度、压力、位置等）的能力。每个传感器都是网络中的一个节点，它不仅可以捕获数据，还能通过无线或有线的通信技术将数据发送到一个中央收集点或直接交换信息与其他节点。

传感器网络的设计旨在实现对特定区域或环境的高效、自动化监测，支持从简单的家庭温度控制系统到复杂的工业过程监控和自然灾害预警系统等广泛应用。在部署时，这些网络能够覆盖从几米到几千米不等的区域，根据需要提供密集或稀疏的监测。

其中一个关键特性是自组织能力，意味着传感器节点能够在没有人工干预的情况下自动建立和维护网络连接。这种特性使得传感器网络特别适用于那些人类难以或不能到达的环境中，如深海探测、森林火灾监测或战场侦察。

### 4.2.2 船内无线通信

## 4.3 船船与船岸通信技术

### 4.3.1 自动识别系统（AIS）

### 4.3.2 VHF与HF通信技术

### 4.3.3 船用卫星通信技术

在广阔无垠的大海上，一艘独自航行的巨轮上的船员急需与远在他乡的家人联系，这正是全球领先的海事卫星通讯提供者——Inmarsat发挥作用的场景。自1979年成立以来，Inmarsat已成为连接遥远海域船舶与世界其他部分的桥梁。通过一系列地球同步轨道卫星，它为船舶提供了稳定的电话、数据传输以及互联网服务，确保船员可以在几乎全球任何海域与外界保持通讯。

Inmarsat的服务不仅限于日常通讯，它还是全球海上遇险与安全系统（GMDSS）的关键组成部分，为海上安全提供了强有力的保障。通过Inmarsat，船舶可以在遭遇紧急情况时，立即向最近的救援中心发送求救信号，包括船舶的位置信息，从而大大提高救援效率和生存几率。

随着时代的发展，Inmarsat公司提供了不同系列的海事卫星服务。比如Inmarsat-F系列，Inmarsat-F系列是Inmarsat通信网络的早期成员，主要提供电话和数据通信服务，包括海事、航空和陆地应用。这些卫星使用L波段频率，能够提供覆盖全球的可靠通信服务。虽然随着技术的发展，Inmarsat推出了更先进的卫星系列，但F系列在其服务期内为全球通信做出了重要贡献。

Inmarsat-5系列标志着Inmarsat进入宽带全球区域网（Global Xpress，GX）服务的新纪元。这些卫星运营在Ka波段，提供了迄今为止Inmarsat最高速的数据通信服务，支持高达50Mbps的下载速度。Inmarsat-5系列卫星采用了高通量卫星（HTS）技术，这种技术通过使用多个窄束覆盖地球，大大增加了数据传输的容量和效率。它们为航空、海事和政府用户提供了高速的互联网接入、视频会议和实时数据传输服务。

Inmarsat-6系列则是Inmarsat最新一代的卫星，将进一步扩展公司的全球移动通信服务。这些卫星被设计为双波段卫星，同时支持L波段和Ka波段，不仅保留了Inmarsat传统的高可靠性服务，还结合了高通量宽带服务的优势。Inmarsat-6系列卫星预计将提供更高的数据传输速率、更大的容量以及更加灵活的服务配置，以满足未来数十年全球用户日益增长的通信需求。

除了安全和救援服务外，Inmarsat还通过其先进的通讯技术支持了海上业务操作的现代化。从船舶跟踪和监控、远程医疗咨询，到天气信息服务和航海数据的实时更新，Inmarsat为船舶运营商和船员提供了全面的解决方案，使航海更加安全、高效和舒适。

### 4.3.4 VDES

如果海上的每艘船舶都能够无缝接入一个高速、可靠的数字通信网络，这将极大地提升海上安全、导航以及环境保护的能力。这正是VHF数据交换系统（VDES）的使命——一个为海事领域量身定制的先进通信框架。在本书船联网体系框架下，船舶、航道标志、岸基站甚至卫星都是这个网络中的节点，VHF数据交换系统（VDES）就像是这个网络的新版操作系统之一，它让这些节点以前所未有的效率和速度进行通信。

VDES像是海上通信的超级公路，它不仅增强了传统的自动识别系统（AIS）功能，还通过引入额外的频道和提供从船舶到岸、船舶到船舶，乃至船舶到卫星的通信能力，将数据传输速率提升到了一个新的水平。这意味着，船舶可以接收和发送大量数据，从精确的导航警告到实时的海洋气象信息，再到关键的航行数据，所有这些都可以通过VDES快速、安全地进行交换。

VDES基于传统的VHF（甚高频）无线电频谱工作，但它引入了一些关键的技术创新。首先，它扩展了频道的使用范围，不仅包括了用于自动识别系统（AIS）的频道，还新增了专为数据交换设计的附加频道。这意味着VDES不仅能承载更多的通信量，还能保证数据传输的安全性和可靠性。

在技术架构上，VDES由三个主要组成部分构成：AIS应用特定消息（ASM）、VHF数据交换（VDE）和卫星VHF数据交换（VDE-SAT）。ASM允许传输更为复杂的航海和安全信息；VDE提供船舶与船舶、船舶与岸基之间的高速数据通信；而VDE-SAT则扩展了这种通信能力到全球范围，通过卫星将数据传输到地球上任何位置。

VDES的一个关键创新是它的调制解调技术，它使用高级的数字信号处理技术来优化信号传输，即使在恶劣的海洋环境中也能保证数据传输的稳定和准确。此外，VDES还采用了先进的加密和安全协议，确保数据传输的安全性，防止数据被未经授权的用户访问或篡改。

通过VDES，船舶与海上交通管理系统的互动将变得前所未有的紧密和高效，就像在海上建立了一个无线的数据桥梁，不仅加强了全球海上监控和管理的能力，还为船舶提供了更加安全、绿色和智能的航行环境。随着VDES技术的进一步发展和应用，它有望开启海事通信的新纪元，使全球海上航行更加安全、高效和可靠。

## 4.4 船联网新兴通信技术

### 4.4.1 Mesh组网技术在船舶通信中的应用

### 4.4.2 5G/6G在船联网中的应用展望

### 4.4.3 星链通信技术的海事应用
